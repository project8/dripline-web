<html>
<head>
    <script type="text/javascript" src="js/demo0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>

<script>
function local_update(name, value) {
    console.log("using local updater");
    document.getElementById(name).innerHTML=JSON.stringify(JSON.parse(value), null, 2);
}
</script>

<!-- reusable list of sensor names -->
<datalist id="sensors">
  <option value="flux_capacitance"></option>
  <option value="flux_inductance"></option>
</datalist>

<body>

  <h1>Simple dripline interface demo</h1>

  <h2>Retrieve value</h2>
  <form id="get_form">
    Sensor name: <input type="text" name="get_target" list="sensors" spellcheck=false>
    <button type="button" onclick=get_amqp(form.get_target.value,"get_output",local_update)>Get</button><br>
    <pre id="get_output"></pre>
  </form>

  <hr>
  <h2>Assign value</h2>
  <form id="set_form">
    Sensor name: <input type="text" name="set_target" list="sensors" spellcheck=false>
    New value: <input type="text" name="set_value">
    <button type="button" onclick=set_amqp(form.set_target.value,form.set_value.value,"set_output",local_update)>Set</button><br>
    <pre id="set_output"></pre>
  </form>

</body>
</html>
